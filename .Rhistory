"fee_type",
"fee_amount",
"actual_original_start_date",
"plan_id")] %>% t(.) -> main.data
main.data <- as.data.frame(main.data)
names(main.data) <- "Main Impact Info"
index <- unique.index[as.numeric(top.impacts.cr$bayes.index[k])]
change.date.i <- max(changes[changes$change_index == index, "date"])
product.i <- unique(changes[changes$change_index == index, "product"])
utility.i <- paste(unique(changes[changes$change_index == index, "utility"]), unique(changes[changes$change_index == index, "utility_id"]), sep = " - ")
cr.ct %>%
filter(utility_name_id == utility.i) %>%
filter(product == product.i) -> leads.i
leads.ts <- zoo(leads.i[,!names(leads.i) %in% c("date_submitted", "utility_name_id", "product")], order.by = leads.i$date_submitted)
pre.i <- c(min(leads.i$date_submitted), change.date.i)
post.i <- c(change.date.i + 1, max(leads.i$date_submitted))
impact.i <- try.Causal.Impact(time_series = leads.ts, pre_date = pre.i, post_date = post.i, conf_int = 0.05)
utility.name.i <- unique(changes[changes$change_index == index, "utility_name_id"])
changes[changes$utility_name_id == utility.name.i, ] %>%
filter(graph.date > (today()-(28+1))) -> changes.full.i
daily.prices %>%
filter(utility_name_id == utility.i) %>%
filter(product == product.i) -> daily.prices.i
ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
theme(legend.position = "none")
p <- ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
theme(legend.position = "none")
library(ggplotly)
library(plotly)
ggplotly(p)
p <- ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = change.date.i, linetype = "longdash") +
geom_text(change.date.i) +
theme(legend.position = "none")
p <- ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = change.date.i, linetype = "longdash") +
theme(legend.position = "none")
ggplotly(p)
p <- ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.POSIXct(change.date.i), linetype = "longdash") +
theme(legend.position = "none")
ggplotly(p)
graph.date
head(changes)
class(changes$graph.date)
change.date.i
class(change.date.i)
class(changes$graph.date)
p <- ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(aes(xintercept = change.date.i, linetype = "longdash")) +
theme(legend.position = "none")
ggplotly(p)
p <- ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(aes(xintercept = 5, linetype = "longdash")) +
theme(legend.position = "none")
ggplotly(p)
ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(aes(xintercept = 5, linetype = "longdash")) +
theme(legend.position = "none")
ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(aes(xintercept = 1, linetype = "longdash")) +
theme(legend.position = "none")
ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(aes(xintercept = 100, linetype = "longdash")) +
theme(legend.position = "none")
ggplotly(p)
ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(aes(xintercept = "2017-02-06", linetype = "longdash")) +
theme(legend.position = "none")
ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(aes(xintercept = as.Date("2017-02-06"), linetype = "longdash")) +
theme(legend.position = "none")
ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(aes(xintercept = as.numeric("2017-02-06"), linetype = "longdash")) +
theme(legend.position = "none")
ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric("2017-02-06"), linetype = "longdash") +
theme(legend.position = "none")
ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none")
p <- ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = change_index)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = change_index)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none")
ggplotly(p)
str(changes.full.i)
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = supplier)) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = supplier)) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = supplier)) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none"))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, change_index, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, change_index, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, change_index, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none"))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none"))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none")) + ggtitle("Plan Price Changes") + geom_text("Change Date")
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_text("Change Date"))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_text(aes("Change Date")))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + annotation_custom(grob = as.character(change.date.i), xmin = as.numeric(change.date.i), xmax = as.numeric(change.date.i)))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_label(aes(as.character(change.date.i)))
)
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_label(aes(as.character(change.date.i))))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_label(aes(change.date.i)))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_label(aes(label = change.date.i)))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_label(aes(x = change.date.i, label = change.date.i)))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_label(aes(x = change.date.i, y = 8.5, label = change.date.i)))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_text(aes(x = change.date.i, y = 8.5, label = change.date.i)))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_text(aes(x = change.date.i, y = 8.5, label = as.character(change.date.i))))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_text(aes(x = as.Date("2017-02-06"), y = 8.5, label = as.character(change.date.i))))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_text(aes(x = as.Date("2017-02-06"), y = 8.5, label = "Hello"))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle("Plan Price Changes") + geom_text(aes(x = as.Date("2017-02-06"), y = 8.5, label = "Hello")))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle(paste("Plan Price Changes Around", change.date.i, sep = " ")))
ggplotly(ggplot() + geom_line(data = changes.full.i[changes.full.i$change == "plan_change",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "plan_end",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_point(data = changes.full.i[changes.full.i$change == "new_plan",], aes(graph.date, plan_price, col = paste(supplier, plan_name, sep = " "))) +
geom_line(data = daily.prices.i, aes(date, plan_price.mean)) +
geom_line(data = daily.prices.i, aes(date, plan_price.max)) +
geom_line(data = daily.prices.i, aes(date, plan_price.min)) +
geom_vline(xintercept = as.numeric(change.date.i), linetype = "longdash") +
theme(legend.position = "none") + ggtitle(paste("Plan Price Changes:", change.date.i, sep = " ")))
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
runApp('Dropbox/Data_Engineering/Top_Plans_Analyzer')
shiny::runApp('Dropbox/Data_Engineering/Data_Hub')
4908-3851
4908+1057
4908+1057+1057
4908+1057+1057+1057
4908+1057+1057+1057+1057
4908+1057+1057+1057+1057+1057
4908+1057+1057+1057+1057+1057+1057
4908+1057+1057+1057+1057+1057+1057+1057
4908+1057+1057+1057+1057+1057+1057+1057+1057
4908+1057+1057+1057+1057+1057+1057+1057+1057+1057
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
runApp('Dropbox/Data_Engineering/Causal_Impact_Analysis_App')
setwd("/Users/mmichonski/Data_Engineering/Causal_Impact_Analysis_App")
setwd("/Users/mmichonski/Dropbox/Data_Engineering/Causal_Impact_Analysis_App")
library(shiny)
library(shinyapps)
deployApp(account = "chooseenergy")
deployApp(account = "chooseenergy")
getwd()
deployApp(account = "chooseenergy")
deployApp(account = "chooseenergy")
deployApp(account = "chooseenergy")
runApp()
deployApp(account = "chooseenergy")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
getwd()
deployApp(account = "chooseenergy")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
getwd()
deployApp(account = "chooseenergy")
deployApp(account = "chooseenergy")
deployApp(account = "chooseenergy")
runApp()
